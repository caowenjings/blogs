(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{210:function(t,s,a){t.exports=a.p+"assets/img/minip-login.2fcc9f35.jpg"},257:function(t,s,a){"use strict";a.r(s);var n=a(6),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"微信小程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序"}},[t._v("#")]),t._v(" 微信小程序")]),t._v(" "),s("blockquote",[s("p",[t._v("参考资料")]),t._v(" "),s("ul",[s("li",[t._v("1.资料："),s("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信官方文档-小程序"),s("OutboundLink")],1)])])]),t._v(" "),s("h2",{attrs:{id:"_1、简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、简介"}},[t._v("#")]),t._v(" 1、简介")]),t._v(" "),s("p",[t._v("灰度更新和线上版本回退功能：按客户等维度发布")]),t._v(" "),s("ul",[s("li",[t._v("双线程架构：视图线程和逻辑线程，两线程通过 WeixinJSBridge 与 native 通信")]),t._v(" "),s("li",[t._v("WXS(视图线程，不能调用 js\\WXML\\WCSS\\js(setData),初始化数据使用 setData，后续不于后台交互使用 wxs")]),t._v(" "),s("li",[t._v("视图组件和原生组件：原生组件放在视图组件上方")])]),t._v(" "),s("h2",{attrs:{id:"_2、组件解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、组件解析"}},[t._v("#")]),t._v(" 2、组件解析")]),t._v(" "),s("h3",{attrs:{id:"_1、web-view-组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、web-view-组件"}},[t._v("#")]),t._v(" 1、web-view 组件")]),t._v(" "),s("ul",[s("li",[t._v("限定企业账户使用，需设置业务域名，域名下的 h5 页面才可正常使用。")]),t._v(" "),s("li",[t._v("web-view 组件和小程序隔离，只能通过 url 传递参数。")]),t._v(" "),s("li",[t._v("无法使用原生组件覆盖，使用 js-sdk 在 H5 页面实现功能。")])]),t._v(" "),s("h4",{attrs:{id:"_1、判断是否在小程序环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、判断是否在小程序环境"}},[t._v("#")]),t._v(" 1、判断是否在小程序环境")]),t._v(" "),s("ul",[s("li",[t._v("js-sdk")]),t._v(" "),s("li",[t._v("localStorage 塞入取出变量")]),t._v(" "),s("li",[t._v("判断 user-agent")])]),t._v(" "),s("h4",{attrs:{id:"_2、鉴权方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、鉴权方式"}},[t._v("#")]),t._v(" 2、鉴权方式")]),t._v(" "),s("ul",[s("li",[t._v("HTTP Basic Authentication")]),t._v(" "),s("li",[t._v("session-cookie（后端/灰度）")]),t._v(" "),s("li",[t._v("token(JWT)")]),t._v(" "),s("li",[t._v("OAuth（一键登录）")])]),t._v(" "),s("p",[t._v("wx.login\\wx.checkSession\\wx.request")]),t._v(" "),s("h4",{attrs:{id:"_3、h5-与小程序通信"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、h5-与小程序通信"}},[t._v("#")]),t._v(" 3、h5 与小程序通信")]),t._v(" "),s("p",[t._v("h5：postMessage 发送消息\nh5：postMessage 发送消息")]),t._v(" "),s("p",[t._v("小程序：wx.miniProgram.postMessage 获取信息")]),t._v(" "),s("h4",{attrs:{id:"_4、调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、调试"}},[t._v("#")]),t._v(" 4、调试")]),t._v(" "),s("p",[t._v("开发工具可使用调试工具")]),t._v(" "),s("p",[t._v("手机：vConsole")]),t._v(" "),s("h3",{attrs:{id:"_3、双重登录态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、双重登录态"}},[t._v("#")]),t._v(" 3、双重登录态")]),t._v(" "),s("h3",{attrs:{id:"_1、三种状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、三种状态"}},[t._v("#")]),t._v(" 1、三种状态")]),t._v(" "),s("p",[t._v("访客态、游客态、会员态")]),t._v(" "),s("ul",[s("li",[t._v("访客态：未授权用户信息，未静默登录")]),t._v(" "),s("li",[t._v("游客态：授权用户信息，进行静默登录")]),t._v(" "),s("li",[t._v("会员态：授权手机号或使用账号密码登录，使用手机号进行账号关联")])]),t._v(" "),s("h3",{attrs:{id:"_2、静默登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、静默登录"}},[t._v("#")]),t._v(" 2、静默登录")]),t._v(" "),s("h3",{attrs:{id:"_1、登录流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、登录流程"}},[t._v("#")]),t._v(" 1、登录流程")]),t._v(" "),s("p",[t._v("利用小程序登录机制，实现静默登录，对客户无感\n"),s("img",{attrs:{src:a(210),alt:""}})]),t._v(" "),s("ul",[s("li",[s("p",[t._v("小程序：调用 wx.login() 获取临时登录凭证 code ，并回传到开发者服务器")]),t._v(" "),s("ul",[s("li",[t._v("code 有效率期 5min，短时间内多次获取 code 值不变，有缓存")])])]),t._v(" "),s("li",[s("p",[t._v("小程序：使用 wx.request 调用开发者服务器接口，上送 code 值")])]),t._v(" "),s("li",[s("p",[t._v("开发者服务器：调用 auth.code2Session 接口进行登录请求，获取 用户唯一标识 OpenID 、 用户在微信开放平台帐号下的唯一标识 UnionID（若当前小程序已绑定到微信开放平台帐号） 和 会话密钥 session_key")]),t._v(" "),s("ul",[s("li",[t._v("登录凭证校验接口："),s("code",[t._v("https://api.weixin.qq.com/sns/jscode2session")])]),t._v(" "),s("li",[t._v("上送：code + appid + appSecret")]),t._v(" "),s("li",[t._v("接收：openid + session_key + unionid")]),t._v(" "),s("li",[t._v("会话密钥 session_key 是对用户数据进行加密签名的密钥。为了应用自身的数据安全，开发者服务器不应该把会话密钥下发到小程序，也不应该对外提供这个密钥，code 登录后会失效。")])])]),t._v(" "),s("li",[s("p",[t._v("开发者服务器：使用 openid + unionid + session_key 建立登录态，使用 token 鉴权或 session 鉴权，返回 token 或者 sessionid。")])]),t._v(" "),s("li",[s("p",[t._v("小程序：将鉴权信息 token 或 sessionid 存入 storage 中，后续调用接口时携带鉴权信息。")])]),t._v(" "),s("li",[s("p",[t._v("开发者服务器：根据上送鉴权信息，校验成功后，回传数据。")])])]),t._v(" "),s("h4",{attrs:{id:"_2、api-解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、api-解析"}},[t._v("#")]),t._v(" 2、api 解析")]),t._v(" "),s("ul",[s("li",[t._v("openid 和 unionid\n"),s("ul",[s("li",[t._v("openid\n"),s("ul",[s("li",[t._v("客户在某一应用下的唯一标识：同一平台，不同应用，编号不同")]),t._v(" "),s("li",[t._v("通过后台调用 auth.code2Session 登录凭证校验接口获取")])])]),t._v(" "),s("li",[t._v("unionid\n"),s("ul",[s("li",[t._v("客户在同一个微信开放平台下的唯一标识：同一平台，不同应用，编号相同")]),t._v(" "),s("li",[t._v("当前小程序已绑定到微信开放平台帐号可通过后台调用 auth.code2Session 接口获取")]),t._v(" "),s("li",[t._v("前期通过 getUseInfo 获取，目前可通过 wx.login 获取，接口隔离")])])])])]),t._v(" "),s("li",[t._v("wx.getUserInfo\n"),s("ul",[s("li",[t._v("存量：获取用户信息，获取 unionid")]),t._v(" "),s("li",[t._v("现状：匿名头像昵称、默认性别地区、加密后的身份认证")])])]),t._v(" "),s("li",[t._v("wx.getUserProfile\n"),s("ul",[s("li",[t._v("弹出个人信息授权弹框")]),t._v(" "),s("li",[t._v("成功后获取用户信息、调用失败")])])]),t._v(" "),s("li",[t._v("wx.login\n"),s("ul",[s("li",[t._v("获取 code")]),t._v(" "),s("li",[t._v("获取 unionid")])])])]),t._v(" "),s("h4",{attrs:{id:"_3、超时处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、超时处理"}},[t._v("#")]),t._v(" 3、超时处理")]),t._v(" "),s("ul",[s("li",[t._v("小程序到开发服务器认证超时：校验 sessionkey，重新进行登录或重新发起请求")]),t._v(" "),s("li",[t._v("开发者服务器到 wx 服务器认证超时：重新发起请求")]),t._v(" "),s("li",[t._v("小程序到开发者服务器登录后交易超时：重新发送请求即可")])]),t._v(" "),s("p",[t._v("参考资料："),s("a",{attrs:{href:"https://www.cnblogs.com/wangsky/p/11023616.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("小程序的登录与静默续期"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_3、用户登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、用户登录"}},[t._v("#")]),t._v(" 3、用户登录")]),t._v(" "),s("p",[t._v("操作具体业务，需要会员及用户体系时，添加用户登录流程，弹出登录弹框，通常使用微信一键登录或账号密码登录两种方式，一般使用手机号进行用户体系关联。")]),t._v(" "),s("ul",[s("li",[t._v("微信一键登录：提示用户授权手机号使用，getPhoneNumber\n"),s("ul",[s("li",[t._v("授权使用手机号，则用手机号进行账号关联绑定，进行登录操作")]),t._v(" "),s("li",[t._v("未授权使用手机号，登录失败，跳转至登录弹框")])])]),t._v(" "),s("li",[t._v("账号密码登录：使用账号和密码认证登录\n"),s("ul",[s("li",[t._v("登录成功后，进行账号关联绑定")]),t._v(" "),s("li",[t._v("登录失败返回登录弹框")])])])]),t._v(" "),s("h3",{attrs:{id:"_4、用户体系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、用户体系"}},[t._v("#")]),t._v(" 4、用户体系")]),t._v(" "),s("p",[t._v("账号 saas 系统中，同一账号关联：账号体系、套餐、动态权限等，同一账号查找不同属性。")]),t._v(" "),s("h2",{attrs:{id:"_4、支付宝小程序-微信小程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、支付宝小程序-微信小程序"}},[t._v("#")]),t._v(" 4、支付宝小程序 & 微信小程序")]),t._v(" "),s("h3",{attrs:{id:"_1、app-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、app-json"}},[t._v("#")]),t._v(" 1、app.json")]),t._v(" "),s("h4",{attrs:{id:"_1、小程序的通用设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、小程序的通用设置"}},[t._v("#")]),t._v(" 1、小程序的通用设置")]),t._v(" "),s("p",[t._v("状态栏、导航条、标题、窗口背景色")]),t._v(" "),s("ul",[s("li",[t._v("微信")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("window")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"backgroundTextStyle"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"light"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ……")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("支付宝")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("window")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"light"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ……")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"_2、tabbar"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、tabbar"}},[t._v("#")]),t._v(" 2、tabBar")]),t._v(" "),s("ul",[s("li",[t._v("区别")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tabBar")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 支付宝")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("items")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 微信")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2、pages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、pages"}},[t._v("#")]),t._v(" 2、pages")]),t._v(" "),s("h4",{attrs:{id:"_1、文件名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、文件名"}},[t._v("#")]),t._v(" 1、文件名")]),t._v(" "),s("ul",[s("li",[t._v("支付宝: axml + acss")]),t._v(" "),s("li",[t._v("微信： wxml + wxss")])]),t._v(" "),s("h3",{attrs:{id:"_2、视图页面-axml、wxml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、视图页面-axml、wxml"}},[t._v("#")]),t._v(" 2、视图页面 axml、wxml")]),t._v(" "),s("h4",{attrs:{id:"_1、事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、事件"}},[t._v("#")]),t._v(" 1、事件")]),t._v(" "),s("ul",[s("li",[t._v("支付宝 onTap\\catchTap")]),t._v(" "),s("li",[t._v("微信 bindtap\\catchtouchstart")])]),t._v(" "),s("h4",{attrs:{id:"_2、列表的渲染"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、列表的渲染"}},[t._v("#")]),t._v(" 2、列表的渲染")]),t._v(" "),s("ul",[s("li",[t._v("支付宝")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{{list}}"')]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item-{{index}}"')]),t._v(" index"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index"')]),t._v("\n")])])]),s("ul",[s("li",[t._v("微信")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("wx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{{list}}"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("wx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key"')]),t._v(" wx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"item"')]),t._v("\n")])])]),s("h4",{attrs:{id:"_3、条件渲染"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、条件渲染"}},[t._v("#")]),t._v(" 3、条件渲染")]),t._v(" "),s("p",[t._v("支付宝")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("esleif\n")])])]),s("p",[t._v("微信")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("wx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("wx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("wx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("esleif\n")])])]),s("h3",{attrs:{id:"_3、组件的不同"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、组件的不同"}},[t._v("#")]),t._v(" 3、组件的不同")]),t._v(" "),s("h4",{attrs:{id:"_1、showtoast"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、showtoast"}},[t._v("#")]),t._v(" 1、showToast")]),t._v(" "),s("ul",[s("li",[t._v("支付宝")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("my"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("showToast")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("微信")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("showToast")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"_2、showloading"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、showloading"}},[t._v("#")]),t._v(" 2、showLoading")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("my"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("showLoading")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("微信")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("showLoading")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"_3、request-网络请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、request-网络请求"}},[t._v("#")]),t._v(" 3、request 网络请求")]),t._v(" "),s("ul",[s("li",[t._v("支付宝")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("my"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("httpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("header")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dataType")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fail")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("微信")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("header")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dataType")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fail")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"_4、支付"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、支付"}},[t._v("#")]),t._v(" 4、支付")]),t._v(" "),s("ul",[s("li",[t._v("支付宝")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("my"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tradePay")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tradeNO")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"47983279478923797057247185"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fail")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("微信")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("requstPayment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pre_pay_id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("signType")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MD5"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("paySign")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fail")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"_5、获取-code"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、获取-code"}},[t._v("#")]),t._v(" 5、获取 code")]),t._v(" "),s("p",[t._v("支付宝")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("my"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAuthCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("微信")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"_5、微信小程序问题汇总"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、微信小程序问题汇总"}},[t._v("#")]),t._v(" 5、微信小程序问题汇总")]),t._v(" "),s("ol",[s("li",[t._v("自定义 tabbar 在页面存在下拉更新（scrollview）的时候，页面被下拉，tabbar 也会跟着下拉。")])]),t._v(" "),s("ul",[s("li",[t._v("提前沟通，修改为原生 tabbar")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("require 在小程序中不支持绝对路径，只能用相对路径去选取'../../../utils/tool.js'")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//app.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("$uri")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//comp.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Api "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"utils/tool.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//利用require返回uri带上/")]),t._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("组件引用资源路径不能解析特殊字符或汉字")])]),t._v(" "),s("ul",[s("li",[t._v("规范文件命名")])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("{{}}模板中不能执行特殊方法，只能处理简单的四则运算")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//期望:'34万元'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" money "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("345678")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("view"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" money "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("view"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("方案 利用 wxs 的 format vue wxs 实现 format")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fnToFixed")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("num")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toFixed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fnToFixed\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("wxs src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../../../xxx.wxs'")]),t._v(" module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"filters"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("view"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" filters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fnToFixed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("money"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("view"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[t._v("wxs 无法使用 new Date()")])]),t._v(" "),s("ul",[s("li",[t._v("方案： 使用 getDate()方法")])]),t._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[t._v("setData 过程中需要注意对象覆盖")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("b")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("c")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("d")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//会覆盖原对象b")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("b")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("c")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//解决办法1")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//解决办法2: wx-update-data库")]),t._v("\n")])])]),s("ol",{attrs:{start:"7"}},[s("li",[s("p",[t._v("IOS 的 date 不支持 2020-06-26 格式，必须要转成 2020/06/26")])]),t._v(" "),s("li",[s("p",[t._v("wx 接口不 promise，可使用 wx-promise-pro 库")])])]),t._v(" "),s("h2",{attrs:{id:"_6、小程序框架-wepy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6、小程序框架-wepy"}},[t._v("#")]),t._v(" 6、小程序框架 wepy")]),t._v(" "),s("p",[t._v("常用框架：原生小程序、wepy(vue)、uniapp(vue)、taro(react)")]),t._v(" "),s("ul",[s("li",[t._v("考虑到原声 api 变更后，框架未及时变更情况，可使用原生小程序框架。")]),t._v(" "),s("li",[t._v("跨端和跨平台需求，建议使用小程序框架")])]),t._v(" "),s("p",[t._v("wepy 借鉴了 vue 语法功能，支持 vue 书写特征 - vue 技术友好行")]),t._v(" "),s("h3",{attrs:{id:"_1、生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、生命周期"}},[t._v("#")]),t._v(" 1、生命周期")]),t._v(" "),s("p",[t._v("wepy 生命周期同原生小程序")]),t._v(" "),s("ul",[s("li",[t._v("应用周期\n"),s("ul",[s("li",[t._v("onLaunch 首次打开")]),t._v(" "),s("li",[t._v("onShow 初始化完成")]),t._v(" "),s("li",[t._v("onHide 切换")])])]),t._v(" "),s("li",[t._v("页面周期\n"),s("ul",[s("li",[t._v("onLoad 加载页面")]),t._v(" "),s("li",[t._v("onShow 前后台切换")]),t._v(" "),s("li",[t._v("onHide 前后台切换")]),t._v(" "),s("li",[t._v("onUnLoad 重定向 / 路由切换")]),t._v(" "),s("li",[t._v("onPullDownRefresh 下拉")]),t._v(" "),s("li",[t._v("onReachBottom 上拉")]),t._v(" "),s("li",[t._v("onShareAppMessage 分享")]),t._v(" "),s("li",[t._v("……")])])])]),t._v(" "),s("h3",{attrs:{id:"_2、数据层-数据绑定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、数据层-数据绑定"}},[t._v("#")]),t._v(" 2、数据层-数据绑定")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("label")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"label"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//原生小程序")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("label "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"label1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//wepy")]),t._v("\n")])])]),s("ol",[s("li",[t._v("如何做到监听数据改变，多次 setData 时候，通信次数是一次还是几次")])]),t._v(" "),s("ul",[s("li",[t._v("在一次渲染周期内，收到多次 setData 的话，只会渲染一次")]),t._v(" "),s("li",[t._v("jscore -> native ->web view")])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("如何优化小程序数据通信，提升页面性能")])]),t._v(" "),s("ul",[s("li",[t._v("减少 setData 的调用，合并多个 setData")]),t._v(" "),s("li",[t._v("与界面渲染无关的数据最好不要设置在 data")]),t._v(" "),s("li",[t._v("有些数据不在页面中展示，包含复杂数据结构或者超长字符串，则不应该使用 setData 来设置这些数据")])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("哪些地方可以放置无关数据")]),t._v(" "),s("li",[t._v("为什么 data 设置长字符串，不显示也会影响页面性能")]),t._v(" "),s("li",[t._v("wepy 如何做数据绑定优化")])]),t._v(" "),s("ul",[s("li",[t._v("wepy 内部实现了一个脏数据检查机制，函数执行完成之后 -> data-check")]),t._v(" "),s("li",[t._v("newValue 和 oldValue 做比较，如果有变化，就会加入到 readyToSet 的队列中，最后统一做一个 setData")]),t._v(" "),s("li",[t._v("同一时间只允许一个脏值检查流程进行")])]),t._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[t._v("wepy 中异步数据如何更新")])]),t._v(" "),s("h3",{attrs:{id:"_3-面试题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-面试题"}},[t._v("#")]),t._v(" 3. 面试题")]),t._v(" "),s("p",[t._v("1、小程序的生命周期")]),t._v(" "),s("p",[t._v("2、小程序的双线程架构")]),t._v(" "),s("p",[t._v("view thread + appService thread\nnotify、 sendData 对应周期")]),t._v(" "),s("h2",{attrs:{id:"_7、小程序相关面试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7、小程序相关面试"}},[t._v("#")]),t._v(" 7、小程序相关面试")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("小程序优势：无需下载安装，直接使用，运行速度快")])]),t._v(" "),s("li",[s("p",[t._v("小程序页面构成：index.js(js 交互逻辑)\\index.json(页面配置)\\index.wxml(html)\\index.wxss(样式)")])]),t._v(" "),s("li",[s("p",[t._v("小程序与 H5 的区别：")]),t._v(" "),s("ol",[s("li",[t._v("运行环境：H5 的宿主环境是浏览器，小程序基于浏览器内核重构的内置解析器，无 dom、bom 对象")]),t._v(" "),s("li",[t._v("系统权限：小程序能获得更多的系统权限")]),t._v(" "),s("li",[t._v("渲染机制：小程序逻辑层和渲染层是分开的，而 H5 页面 UI 渲染和 js 执行都是一个线程，会出现阻塞。")])])]),t._v(" "),s("li",[s("p",[t._v("小程序生命周期：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("应用的生命周期")]),t._v(" "),s("ol",[s("li",[t._v("首次打开小程序，触发 onLaunch")]),t._v(" "),s("li",[t._v("初始化完成，触发 onShow 方法，监听小程序显示")]),t._v(" "),s("li",[t._v("从后台进入前台，触发 onShow 方法")]),t._v(" "),s("li",[t._v("从前台进入后天，触发 onHide 方法")]),t._v(" "),s("li",[t._v("小程序后台运行一定时间，或系统资源占用过高，会被销毁")])])]),t._v(" "),s("li",[s("p",[t._v("页面的生命周期")]),t._v(" "),s("ol",[s("li",[t._v("小程序注册完成，加载页面，触发 onLoad 方法")]),t._v(" "),s("li",[t._v("页面载入后触发 onShow 方法")]),t._v(" "),s("li",[t._v("首次显示页面，触发 onReady 方法，渲染页面元素和样式，一个页面只会调用一次")]),t._v(" "),s("li",[t._v("小程序由前台进入后台运行或跳转其他页面时，触发 onHide 方法")]),t._v(" "),s("li",[t._v("小程序由后台到前台或重新进入页面时，触发 onShow 方法")]),t._v(" "),s("li",[t._v("当使用重定向方法 wx.redirectTo 或关闭当前页面返回上一页 wx.navigateBack()，触发 onUnload 事件")])])])])]),t._v(" "),s("li",[s("p",[t._v("小程序的双线程架构")]),t._v(" "),s("ol",[s("li",[t._v("小程序的渲染层和逻辑层分别由 2 个线程管理：\n"),s("ul",[s("li",[t._v("渲染层：页面渲染相关的任务全部放在 webview 线程里执行，一个小程序存在多个界面，所以渲染层存在多个 webview 线程")]),t._v(" "),s("li",[t._v("逻辑层：采用 jsCore 线程运行 js 脚本")])])]),t._v(" "),s("li",[t._v("视图层和逻辑层通过系统层的 WeixinJsBridge 进行通信：逻辑层把数据变化通知到视图层，触发视图层面的更新，视图层把触发的事件发送给逻辑层，进行业务处理。")]),t._v(" "),s("li",[t._v("页面渲染的具体流程是：在渲染层，宿主环境会吧 wxml 解析程 js 对象，在逻辑层发生数据变更的时候，我们通过宿主环境提供的 setData 方法把数据从逻辑层传到渲染层，再经过对比前后的差异，把差异应用在原来的 dom 树上，渲染出正确的 ui 页面。")])])]),t._v(" "),s("li",[s("p",[t._v("小程序运行机制")]),t._v(" "),s("ol",[s("li",[t._v("热启动：用户已经打开某小程序，然后在一定时间内再次打开该小程序，此时无需重启启动，只需将后台的小程序切换到前台")]),t._v(" "),s("li",[t._v("冷启动：用户首次打开小程序或被微信主动销毁后再次打开，小程序重新加载启动。")]),t._v(" "),s("li",[t._v("销毁：只有当小程序进入后天一定时间，或者系统占用资源过高，才会被真正销毁。")])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);